---
globs: app/**/*.ts,app/**/*.tsx,src/**/*.ts,src/**/*.tsx
description: React 19 and Next.js 15 (App Router) usage patterns.
---
# React 19 / Next.js 15 Best Practices

## Components
- Prefer React Server Components. Add `use client` only when hooks or browser-only APIs are required.
- Implement error boundaries and Suspense where async UI is possible.

## State
- Prefer URL state with `nuqs` for filters/sorting/pagination.
- Use `useActionState` for server actions and form handling.
- Use enhanced `useFormStatus` (access `data`, `method`, `action`).
- Minimize client state; colocate state as low as possible.

## Async Runtime APIs
- These are async in Next 15:
  - `const cookieStore = await cookies()`
  - `const headersList = await headers()`
  - `const { isEnabled } = await draftMode()`
- In layouts/pages, `params` and `searchParams` are async: `const params = await props.params`.

## Caching and Data Fetching
- Fetch is uncached by default. Opt into caching explicitly when safe.
- Consider `export const fetchCache = 'default-cache'` in pages/layouts needing default caching.
- Use server-side data fetching when possible. For client-side, prefer SWR/React Query for revalidation and caching.

## Files of Interest
- [app/layout.tsx](mdc:app/layout.tsx)
- [app/page.tsx](mdc:app/page.tsx)

